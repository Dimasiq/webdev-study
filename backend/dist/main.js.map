{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Controllers/Route.js","webpack:///./src/Controllers/Ticket.js","webpack:///./src/Controllers/User.js","webpack:///./src/Models/Route.js","webpack:///./src/Models/Ticket.js","webpack:///./src/Models/User.js","webpack:///./src/auth.js","webpack:///./src/index.js","webpack:///./src/router.js","webpack:///external \"babel-polyfill\"","webpack:///external \"body-parser\"","webpack:///external \"express\"","webpack:///external \"express-session\"","webpack:///external \"mongoose\"","webpack:///external \"passport\"","webpack:///external \"passport-local\""],"names":["RouteController","find","req","res","Route","lean","routes","send","create","route","area","body","start","end","save","redirect","TicketController","Ticket","tickets","ticket","title","date","price","UserController","User","users","user","username","password","schema","Schema","type","String","required","model","Types","ObjectId","ref","Number","auth","strategy","done","findOne","err","message","serialize","_id","deserialize","id","findById","app","express","PORT","process","env","use","bodyParser","json","session","secret","resave","saveUninitialized","passport","initialize","router","serializeUser","deserializeUser","Strategy","mongoose","connect","DB_CONNECTION_STRING","useNewUrlParser","useUnifiedTopology","console","log","listen","Router","get","post","authenticate","successRedirect","failureRedirect","failureFlash","destroy","logout","isAuthenticated"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import Route from '../Models/Route';\r\n\r\nconst RouteController = {\r\n    find: async (req, res) => {\r\n        const routes = await Route.find({}).lean();\r\n        res.send(routes);\r\n    },\r\n    create: async (req, res) => {\r\n        const route = new Route({\r\n            area: req.body.area,\r\n            start: req.body.start,\r\n            end: req.body.end\r\n        });\r\n        await route.save();\r\n        res.redirect('/routes');\r\n    }   \r\n}\r\nexport default RouteController;","import Ticket from '../Models/Ticket';\r\n\r\nconst TicketController = {\r\n    find: async (req, res) => {\r\n        const tickets = await Ticket.find({}).lean();\r\n        res.send(tickets);\r\n    },\r\n    create: async (req, res) => {\r\n        const ticket = new Ticket({\r\n            title: req.body.title,\r\n            date: req.body.date,\r\n            price: req.body.price\r\n        });\r\n        await ticket.save();\r\n        res.redirect('/tickets');\r\n    }   \r\n}\r\nexport default TicketController;","import User from '../Models/User';\r\n\r\nconst UserController = {\r\n    find: async (req, res) => {\r\n        const users = await User.find({}).lean();\r\n        res.send(users);\r\n    },\r\n    create: async (req, res) => {\r\n        const user = new User({\r\n            username: req.body.username,\r\n            password: req.body.password\r\n        });\r\n        await user.save();\r\n        res.redirect('/users');\r\n    }   \r\n}\r\nexport default UserController;","import {model, Schema} from 'mongoose';\r\n\r\nconst schema = new Schema({\r\n    area: {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    start: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    end: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst Route = model('route', schema);\r\n\r\nexport default Route;","import {model, Schema} from 'mongoose';\r\n\r\nconst schema = new Schema({\r\n    title: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    route: {\r\n        type: Schema.Types.ObjectId,\r\n        ref: 'Route'\r\n    },\r\n    date: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    price: {\r\n        type: Number,\r\n        required: true,\r\n    }\r\n})\r\n\r\nconst Ticket = model('ticket', schema);\r\n\r\nexport default Ticket;","import {model, Schema} from 'mongoose';\r\n\r\nconst schema = new Schema({\r\n    username: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    password: {\r\n        type: String,\r\n        required: true,\r\n    }\r\n})\r\n\r\nconst User = model('user', schema);\r\n\r\nexport default User;","import User from './Models/User';\r\n\r\nconst auth = {\r\n    strategy: (username, password, done) => {\r\n        User.findOne({ username: username }, (err, user) => {\r\n            if (err) { return done(err); }\r\n            if (!user) {\r\n                return done(null, false, { message: 'Incorrect username.' });\r\n            }\r\n            if (user.password !== password) {\r\n                return done(null, false, { message: 'Incorrect password.' });\r\n            }\r\n            return done(null, user);\r\n        });\r\n    },\r\n\r\n    serialize: (user, done) => {\r\n        done(null, user._id);\r\n    },\r\n\r\n    deserialize: (id, done) => {\r\n        User.findById(id, function(err, user) {\r\n            done(err, user);\r\n        })\r\n    }\r\n}\r\nexport default auth;","import express from 'express';\r\nimport session from 'express-session';\r\nimport mongoose from 'mongoose';\r\nimport bodyParser from 'body-parser';\r\nimport passport from 'passport';\r\nimport { Strategy } from 'passport-local';\r\nimport router from './router';\r\nimport auth from './auth';\r\n\r\nconst app = express();\r\nconst PORT = process.env.PORT || 3000\r\n\r\napp.use(bodyParser.json());\r\napp.use(session({ secret: 'sessionSecret', resave: true, saveUninitialized: true }))\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\napp.use(router);\r\n\r\npassport.serializeUser(auth.serialize);\r\npassport.deserializeUser(auth.deserialize);\r\npassport.use(new Strategy(auth.strategy));  \r\n\r\nmongoose.connect(\r\n    process.env.DB_CONNECTION_STRING || 'mongodb+srv://dimasiq:5558795a@cluster0-8j7da.gcp.mongodb.net/webdev',\r\n    {\r\n        useNewUrlParser: true,\r\n        useUnifiedTopology: true\r\n    },\r\n    (err) => {\r\n        if(err) {\r\n            return console.log(err);\r\n        } else {\r\n            app.listen(PORT, (err) => {\r\n                if(err) {\r\n                    console.log(err);\r\n                } else {\r\n                    console.log(`App listens to port ${PORT}!`);\r\n                }\r\n            })\r\n        }\r\n    }\r\n);","import {Router} from 'express';\r\nimport TicketController from './Controllers/Ticket';\r\nimport RouteController from './Controllers/Route';\r\nimport UserController from './Controllers/User';\r\nimport passport from 'passport';\r\n\r\nconst router = Router();\r\n\r\nrouter.get('/', (req, res) => {\r\n    res.send('Hi!')\r\n});\r\n\r\nrouter.get('/tickets', TicketController.find);\r\nrouter.post('/ticket', TicketController.create);\r\n\r\nrouter.get('/routes', RouteController.find);\r\nrouter.post('/route', RouteController.create);\r\n\r\nrouter.get('/users', UserController.find);\r\nrouter.post('/user', UserController.create);\r\n\r\nrouter.get('/login', (req, res) => {\r\n    res.send('Login page!')\r\n});\r\nrouter.post('/login', passport.authenticate('local', { successRedirect: '/', failureRedirect: '/login', failureFlash: false }));\r\n\r\nrouter.get('/logout', (req, res) => {\r\n    req.session.destroy((err) => {\r\n        req.logout()\r\n        res.redirect('/');\r\n    });\r\n});\r\n\r\nrouter.get('/dashboard', (req, res) => {\r\n    if(req.isAuthenticated()){\r\n        res.send(req.user)\r\n    } else {\r\n        res.redirect('/login');\r\n    }\r\n})\r\n\r\nexport default router;","module.exports = require(\"babel-polyfill\");","module.exports = require(\"body-parser\");","module.exports = require(\"express\");","module.exports = require(\"express-session\");","module.exports = require(\"mongoose\");","module.exports = require(\"passport\");","module.exports = require(\"passport-local\");"],"sourceRoot":""}